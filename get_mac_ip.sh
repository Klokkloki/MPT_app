#!/bin/bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è IP –∞–¥—Ä–µ—Å–∞ Mac –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏

echo "üîç –ü–æ–∏—Å–∫ IP –∞–¥—Ä–µ—Å–∞ –≤–∞—à–µ–≥–æ Mac..."
echo ""

# –ü—Ä–æ–±—É–µ–º —Ä–∞–∑–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –ø–æ–ª—É—á–µ–Ω–∏—è IP
IP=$(ifconfig | grep "inet " | grep -v 127.0.0.1 | awk '{print $2}' | head -1)

if [ -z "$IP" ]; then
    IP=$(ipconfig getifaddr en0)
fi

if [ -z "$IP" ]; then
    IP=$(ipconfig getifaddr en1)
fi

if [ -z "$IP" ]; then
    echo "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ IP –∞–¥—Ä–µ—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏"
    echo ""
    echo "–ù–∞–π–¥–∏—Ç–µ IP –≤—Ä—É—á–Ω—É—é:"
    echo "1. –û—Ç–∫—Ä–æ–π—Ç–µ –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –°–µ—Ç—å ‚Üí Wi-Fi"
    echo "2. –ù–∞–π–¥–∏—Ç–µ IP –∞–¥—Ä–µ—Å (–æ–±—ã—á–Ω–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å 192.168.x.x)"
    exit 1
fi

echo "‚úÖ –ù–∞–π–¥–µ–Ω IP –∞–¥—Ä–µ—Å: $IP"
echo ""
echo "üìù –û–±–Ω–æ–≤–∏—Ç–µ NetworkService.swift:"
echo "   –ó–∞–º–µ–Ω–∏—Ç–µ: http://192.168.1.XXX:8000"
echo "   –ù–∞:       http://$IP:8000"
echo ""
echo "üí° –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ:"
echo "   - Mac –∏ iPhone –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫ –æ–¥–Ω–æ–π Wi-Fi —Å–µ—Ç–∏"
echo "   - –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ Mac (python main.py)"
echo "   - Firewall —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ –ø–æ—Ä—Ç 8000"
echo ""

